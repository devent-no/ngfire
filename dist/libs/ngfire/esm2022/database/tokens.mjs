import { inject, InjectFlags, InjectionToken } from "@angular/core";
import { getDatabase } from "firebase/database";
import { FIREBASE_APP } from "ngfire/app";
import { DB_URL, getConfig } from "ngfire/tokens";
export const DATABASE = new InjectionToken('Database instance', {
    providedIn: 'root',
    factory: () => {
        const config = getConfig();
        const app = inject(FIREBASE_APP);
        const url = inject(DB_URL, InjectFlags.Optional);
        if (config.database) {
            return config.database(app, url ?? undefined);
        }
        else {
            return getDatabase(app, url ?? undefined);
        }
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9rZW5zLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vbGlicy9uZ2ZpcmUvZGF0YWJhc2Uvc3JjL3Rva2Vucy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsTUFBTSxFQUFFLFdBQVcsRUFBRSxjQUFjLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDcEUsT0FBTyxFQUFZLFdBQVcsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQzFELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxZQUFZLENBQUM7QUFDMUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFHbEQsTUFBTSxDQUFDLE1BQU0sUUFBUSxHQUFHLElBQUksY0FBYyxDQUFXLG1CQUFtQixFQUFFO0lBQ3hFLFVBQVUsRUFBRSxNQUFNO0lBQ2xCLE9BQU8sRUFBRSxHQUFHLEVBQUU7UUFDWixNQUFNLE1BQU0sR0FBRyxTQUFTLEVBQUUsQ0FBQztRQUMzQixNQUFNLEdBQUcsR0FBRyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDakMsTUFBTSxHQUFHLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDakQsSUFBSSxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDcEIsT0FBTyxNQUFNLENBQUMsUUFBUSxDQUFDLEdBQUcsRUFBRSxHQUFHLElBQUksU0FBUyxDQUFDLENBQUE7UUFDL0MsQ0FBQzthQUFNLENBQUM7WUFDTixPQUFPLFdBQVcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxJQUFJLFNBQVMsQ0FBQyxDQUFDO1FBQzVDLENBQUM7SUFDSCxDQUFDO0NBQ0YsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW5qZWN0LCBJbmplY3RGbGFncywgSW5qZWN0aW9uVG9rZW4gfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgRGF0YWJhc2UsIGdldERhdGFiYXNlIH0gZnJvbSBcImZpcmViYXNlL2RhdGFiYXNlXCI7XG5pbXBvcnQgeyBGSVJFQkFTRV9BUFAgfSBmcm9tIFwibmdmaXJlL2FwcFwiO1xuaW1wb3J0IHsgREJfVVJMLCBnZXRDb25maWcgfSBmcm9tIFwibmdmaXJlL3Rva2Vuc1wiO1xuXG5cbmV4cG9ydCBjb25zdCBEQVRBQkFTRSA9IG5ldyBJbmplY3Rpb25Ub2tlbjxEYXRhYmFzZT4oJ0RhdGFiYXNlIGluc3RhbmNlJywge1xuICBwcm92aWRlZEluOiAncm9vdCcsXG4gIGZhY3Rvcnk6ICgpID0+IHtcbiAgICBjb25zdCBjb25maWcgPSBnZXRDb25maWcoKTtcbiAgICBjb25zdCBhcHAgPSBpbmplY3QoRklSRUJBU0VfQVBQKTtcbiAgICBjb25zdCB1cmwgPSBpbmplY3QoREJfVVJMLCBJbmplY3RGbGFncy5PcHRpb25hbCk7XG4gICAgaWYgKGNvbmZpZy5kYXRhYmFzZSkge1xuICAgICAgcmV0dXJuIGNvbmZpZy5kYXRhYmFzZShhcHAsIHVybCA/PyB1bmRlZmluZWQpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBnZXREYXRhYmFzZShhcHAsIHVybCA/PyB1bmRlZmluZWQpO1xuICAgIH1cbiAgfSxcbn0pO1xuIl19