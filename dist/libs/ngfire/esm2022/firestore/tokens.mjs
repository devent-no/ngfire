import { inject, InjectFlags, InjectionToken } from "@angular/core";
import { initializeFirestore } from "firebase/firestore";
import { FIRESTORE_SETTINGS, getConfig } from "ngfire/tokens";
import { FIREBASE_APP } from "ngfire/app";
export const FIRESTORE = new InjectionToken('Firestore instance', {
    providedIn: 'root',
    factory: () => {
        const config = getConfig();
        const settings = inject(FIRESTORE_SETTINGS, InjectFlags.Optional);
        const app = inject(FIREBASE_APP);
        if (config.firestore) {
            return config.firestore(app, settings ?? {});
        }
        else {
            return initializeFirestore(app, settings ?? {});
        }
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9rZW5zLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vbGlicy9uZ2ZpcmUvZmlyZXN0b3JlL3NyYy90b2tlbnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLE1BQU0sRUFBRSxXQUFXLEVBQUUsY0FBYyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRXBFLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQ3pELE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDOUQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLFlBQVksQ0FBQztBQUcxQyxNQUFNLENBQUMsTUFBTSxTQUFTLEdBQUcsSUFBSSxjQUFjLENBQVksb0JBQW9CLEVBQUU7SUFDM0UsVUFBVSxFQUFFLE1BQU07SUFDbEIsT0FBTyxFQUFFLEdBQUcsRUFBRTtRQUNaLE1BQU0sTUFBTSxHQUFHLFNBQVMsRUFBRSxDQUFDO1FBQzNCLE1BQU0sUUFBUSxHQUFHLE1BQU0sQ0FBQyxrQkFBa0IsRUFBRSxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDbEUsTUFBTSxHQUFHLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQ2pDLElBQUksTUFBTSxDQUFDLFNBQVMsRUFBRSxDQUFDO1lBQ3JCLE9BQU8sTUFBTSxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsUUFBUSxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBQy9DLENBQUM7YUFBTSxDQUFDO1lBQ04sT0FBTyxtQkFBbUIsQ0FBQyxHQUFHLEVBQUUsUUFBUSxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBQ2xELENBQUM7SUFDSCxDQUFDO0NBQ0YsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW5qZWN0LCBJbmplY3RGbGFncywgSW5qZWN0aW9uVG9rZW4gfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgRmlyZXN0b3JlIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcbmltcG9ydCB7IGluaXRpYWxpemVGaXJlc3RvcmUgfSBmcm9tIFwiZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5pbXBvcnQgeyBGSVJFU1RPUkVfU0VUVElOR1MsIGdldENvbmZpZyB9IGZyb20gXCJuZ2ZpcmUvdG9rZW5zXCI7XG5pbXBvcnQgeyBGSVJFQkFTRV9BUFAgfSBmcm9tIFwibmdmaXJlL2FwcFwiO1xuXG5cbmV4cG9ydCBjb25zdCBGSVJFU1RPUkUgPSBuZXcgSW5qZWN0aW9uVG9rZW48RmlyZXN0b3JlPignRmlyZXN0b3JlIGluc3RhbmNlJywge1xuICBwcm92aWRlZEluOiAncm9vdCcsXG4gIGZhY3Rvcnk6ICgpID0+IHtcbiAgICBjb25zdCBjb25maWcgPSBnZXRDb25maWcoKTtcbiAgICBjb25zdCBzZXR0aW5ncyA9IGluamVjdChGSVJFU1RPUkVfU0VUVElOR1MsIEluamVjdEZsYWdzLk9wdGlvbmFsKTtcbiAgICBjb25zdCBhcHAgPSBpbmplY3QoRklSRUJBU0VfQVBQKTtcbiAgICBpZiAoY29uZmlnLmZpcmVzdG9yZSkge1xuICAgICAgcmV0dXJuIGNvbmZpZy5maXJlc3RvcmUoYXBwLCBzZXR0aW5ncyA/PyB7fSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBpbml0aWFsaXplRmlyZXN0b3JlKGFwcCwgc2V0dGluZ3MgPz8ge30pO1xuICAgIH1cbiAgfSxcbn0pO1xuIl19