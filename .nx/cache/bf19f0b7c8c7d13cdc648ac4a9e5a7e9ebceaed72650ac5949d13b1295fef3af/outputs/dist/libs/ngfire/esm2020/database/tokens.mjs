import { inject, InjectFlags, InjectionToken } from "@angular/core";
import { getDatabase } from "firebase/database";
import { FIREBASE_APP } from "ngfire/app";
import { DB_URL, getConfig } from "ngfire/tokens";
export const DATABASE = new InjectionToken('Database instance', {
    providedIn: 'root',
    factory: () => {
        const config = getConfig();
        const app = inject(FIREBASE_APP);
        const url = inject(DB_URL, InjectFlags.Optional);
        if (config.database) {
            return config.database(app, url ?? undefined);
        }
        else {
            return getDatabase(app, url ?? undefined);
        }
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9rZW5zLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vbGlicy9uZ2ZpcmUvZGF0YWJhc2Uvc3JjL3Rva2Vucy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsTUFBTSxFQUFFLFdBQVcsRUFBRSxjQUFjLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDcEUsT0FBTyxFQUFZLFdBQVcsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQzFELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxZQUFZLENBQUM7QUFDMUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFHbEQsTUFBTSxDQUFDLE1BQU0sUUFBUSxHQUFHLElBQUksY0FBYyxDQUFXLG1CQUFtQixFQUFFO0lBQ3hFLFVBQVUsRUFBRSxNQUFNO0lBQ2xCLE9BQU8sRUFBRSxHQUFHLEVBQUU7UUFDWixNQUFNLE1BQU0sR0FBRyxTQUFTLEVBQUUsQ0FBQztRQUMzQixNQUFNLEdBQUcsR0FBRyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDakMsTUFBTSxHQUFHLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDakQsSUFBSSxNQUFNLENBQUMsUUFBUSxFQUFFO1lBQ25CLE9BQU8sTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUUsR0FBRyxJQUFJLFNBQVMsQ0FBQyxDQUFBO1NBQzlDO2FBQU07WUFDTCxPQUFPLFdBQVcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxJQUFJLFNBQVMsQ0FBQyxDQUFDO1NBQzNDO0lBQ0gsQ0FBQztDQUNGLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGluamVjdCwgSW5qZWN0RmxhZ3MsIEluamVjdGlvblRva2VuIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcbmltcG9ydCB7IERhdGFiYXNlLCBnZXREYXRhYmFzZSB9IGZyb20gXCJmaXJlYmFzZS9kYXRhYmFzZVwiO1xuaW1wb3J0IHsgRklSRUJBU0VfQVBQIH0gZnJvbSBcIm5nZmlyZS9hcHBcIjtcbmltcG9ydCB7IERCX1VSTCwgZ2V0Q29uZmlnIH0gZnJvbSBcIm5nZmlyZS90b2tlbnNcIjtcblxuXG5leHBvcnQgY29uc3QgREFUQUJBU0UgPSBuZXcgSW5qZWN0aW9uVG9rZW48RGF0YWJhc2U+KCdEYXRhYmFzZSBpbnN0YW5jZScsIHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnLFxuICBmYWN0b3J5OiAoKSA9PiB7XG4gICAgY29uc3QgY29uZmlnID0gZ2V0Q29uZmlnKCk7XG4gICAgY29uc3QgYXBwID0gaW5qZWN0KEZJUkVCQVNFX0FQUCk7XG4gICAgY29uc3QgdXJsID0gaW5qZWN0KERCX1VSTCwgSW5qZWN0RmxhZ3MuT3B0aW9uYWwpO1xuICAgIGlmIChjb25maWcuZGF0YWJhc2UpIHtcbiAgICAgIHJldHVybiBjb25maWcuZGF0YWJhc2UoYXBwLCB1cmwgPz8gdW5kZWZpbmVkKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZ2V0RGF0YWJhc2UoYXBwLCB1cmwgPz8gdW5kZWZpbmVkKTtcbiAgICB9XG4gIH0sXG59KTtcbiJdfQ==